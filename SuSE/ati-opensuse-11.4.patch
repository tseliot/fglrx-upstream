--- kcl_ioctl.c.orig	2010-12-01 23:35:09.000000000 +0100
+++ kcl_ioctl.c	2010-12-04 01:25:32.989178694 +0100
@@ -193,7 +193,7 @@ void ATI_API_CALL KCL_IOCTL_UnregisterCo
  */
 void* ATI_API_CALL KCL_IOCTL_AllocUserSpace32(long size)
 {
-    void __user *ret = COMPAT_ALLOC_USER_SPACE(size);
+    void __user *ret = arch_compat_alloc_user_space(size);
 
     /* prevent stack overflow */
     if (!access_ok(VERIFY_WRITE, ret, size))
